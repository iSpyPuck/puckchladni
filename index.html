<!DOCTYPE html>
<html lang="en">
<head>
<title>addie - chladni</title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="icon" href="/img/favicon.png" type="image/x-icon">

<!-- Stylesheets -->
<link rel="stylesheet" type="text/css" href="style.css">

<!-- External Scripts -->
<!-- p5.js -->
<script src="https://cdn.jsdelivr.net/npm/p5" type="text/javascript" ></script>

<!-- Local scripts -->
<script src="chladni.js" type="text/javascript"></script>
</head>

<body>

<!-- Hamburger toggle button for mobile -->
<button id="toggleSettingsBtn" class="hamburger-btn" aria-label="Toggle settings panel">
	<span></span>
	<span></span>
	<span></span>
</button>

<!-- Screenshot button -->
<button id="screenshotBtn" class="screenshot-btn" aria-label="Copy screenshot to clipboard">
	<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
		<path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
		<circle cx="12" cy="13" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
	</svg>
</button>

<!-- Grid Screenshot button -->
<button id="gridScreenshotBtn" class="grid-screenshot-btn" aria-label="Generate pattern grid screenshot">
	<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
		<rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
		<rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
		<rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
		<rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
	</svg>
</button>

<!-- Grid Screenshot Modal -->
<div id="gridModal" class="grid-modal" role="dialog" aria-labelledby="gridModalTitle" aria-hidden="true">
	<div class="grid-modal-content">
		<div class="grid-modal-header">
			<h2 id="gridModalTitle">Pattern Grid</h2>
			<button id="closeGridModalBtn" class="close-modal-btn" aria-label="Close modal">&times;</button>
		</div>
		<div class="grid-modal-controls">
			<label for="gridInstrumentSelect">Instrument:</label>
			<select id="gridInstrumentSelect">
				<option value="piano">Piano</option>
				<option value="guitar">Guitar</option>
				<option value="violin">Violin</option>
				<option value="flute">Flute</option>
				<option value="trumpet">Trumpet</option>
				<option value="cello">Cello</option>
			</select>
			<button id="generateGridBtn" type="button">Generate Grid</button>
			<button id="copyGridBtn" type="button">Copy to Clipboard</button>
		</div>
		<div id="gridContainer" class="grid-container">
			<p class="grid-placeholder">Select an instrument and click "Generate Grid" to create patterns for C3, D3, E3, F3, and G3.</p>
		</div>
	</div>
</div>

<!-- Notification element -->
<div id="notification" class="notification" role="alert" aria-live="polite"></div>

<header id="settingsPanel">
	<h1>Settings</h1>
	<form id="settings">
		<fieldset>
			<legend>audio source:</legend>

			<label for="audioFile">Upload audio:</label>
			<input name="audioFile" type="file" id="audioFile" accept="audio/*">

			<br><br>

			<label for="instrumentSelect">Or select instrument:</label>
			<select name="instrumentSelect" id="instrumentSelect">
				<option value="">-- Select Instrument --</option>
				<option value="piano">Piano</option>
				<option value="guitar">Guitar</option>
				<option value="violin">Violin</option>
				<option value="flute">Flute</option>
				<option value="trumpet">Trumpet</option>
				<option value="cello">Cello</option>
			</select>

			<br>

			<label for="noteSelect">Note/Key:</label>
			<select name="noteSelect" id="noteSelect" disabled>
				<option value="">-- Select Note --</option>
				<option value="C3">C3 (130.81 Hz)</option>
				<option value="D3">D3 (146.83 Hz)</option>
				<option value="E3">E3 (164.81 Hz)</option>
				<option value="F3">F3 (174.61 Hz)</option>
				<option value="G3">G3 (196.00 Hz)</option>
				<option value="A3">A3 (220.00 Hz)</option>
				<option value="B3">B3 (246.94 Hz)</option>
				<option value="C4">C4 (261.63 Hz)</option>
				<option value="D4">D4 (293.66 Hz)</option>
				<option value="E4">E4 (329.63 Hz)</option>
				<option value="F4">F4 (349.23 Hz)</option>
				<option value="G4">G4 (392.00 Hz)</option>
				<option value="A4">A4 (440.00 Hz)</option>
				<option value="B4">B4 (493.88 Hz)</option>
				<option value="C5">C5 (523.25 Hz)</option>
			</select>

			<button type="button" id="playNoteBtn" disabled>Play Note</button>

			<div id="audioControls" style="display:none;">
				<button type="button" id="playPauseBtn">Play</button>
				<button type="button" id="rewind10Btn">-10s</button>
				<button type="button" id="rewindFrameBtn">-1 frame</button>
				<button type="button" id="forwardFrameBtn">+1 frame</button>
				<button type="button" id="forward10Btn">+10s</button>
				<div id="audioSeekbar">
					<input type="range" id="seekSlider" min="0" max="100" value="0" step="0.1">
				</div>
				<div id="timeDisplay">0:00 / 0:00</div>
				<div id="frameDisplay">Frame: 0 / 0</div>
			</div>
		</fieldset>

		<fieldset>
			<legend>frequency parameters:</legend>

			<label for="mSlider">m</label>
			<input name="mSlider" type="range" id="mSlider" min="1" max="18" step="0.1" value="9">
			<span id="mValue">9.0</span>

			<br>

			<label for="nSlider">n</label>
			<input name="nSlider" type="range" id="nSlider" min="1" max="18" step="0.1" value="9">
			<span id="nValue">9.0</span>

			<br>

			<label for="frequencyInput">Specific Frequency (Hz):</label>
			<input name="frequencyInput" type="number" id="frequencyInput" min="20" max="2000" step="0.01" placeholder="e.g. 440.00">
			<button type="button" id="applyFrequencyBtn">Apply</button>
		</fieldset>	

		<label for="vSlider">vibration strength:</label>
		<input name="vSlider" type="range" id="vSlider" min="0.01" max="0.1" step="0.01" value="0.02"> 

		<label for="numSlider">number of particles:</label>
		<input name="numSlider" type="range" id="numSlider" min="1000" max="10000" step="1000" value="10000">
	</form>
</header>

<main id="sketch-container"></main>

<footer>
	<a alt="More info" href="https://github.com/addiebarron/chladni" target="_blank">&#9432;</a>
</footer>

</body>
</html>